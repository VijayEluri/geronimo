<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright 2005 The Apache Software Foundation

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<!-- $Rev: 54661 $ $Date$ -->
<openejb-jar xmlns="http://www.openejb.org/xml/ns/openejb-jar" xmlns:naming="http://geronimo.apache.org/xml/ns/naming" configId="customer-ejb">
  <naming:cmp-connection-factory>
    <naming:resource-link>DerbyDatasource</naming:resource-link>
  </naming:cmp-connection-factory>
  <enterprise-beans>
    <entity>
      <ejb-name>CustomerEJB</ejb-name>
      <table-name>CUSTOMERS</table-name>
      <cmp-field-mapping>
        <cmp-field-name>userId</cmp-field-name>
        <table-column>userId</table-column>
      </cmp-field-mapping>
    </entity>
    <entity>
      <ejb-name>ProfileEJB</ejb-name>
      <table-name>PROFILES</table-name>
      <cmp-field-mapping>
        <cmp-field-name>id</cmp-field-name>
        <cmp-field-class>java.lang.Integer</cmp-field-class>
        <table-column>id</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>preferredLanguage</cmp-field-name>
        <table-column>preferredLanguage</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>myListPreference</cmp-field-name>
        <table-column>myListPreference</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>favoriteCategory</cmp-field-name>
        <table-column>favoriteCategory</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>bannerPreference</cmp-field-name>
        <table-column>bannerPreference</table-column>
      </cmp-field-mapping>
      <primkey-field>id</primkey-field>
      <key-generator xmlns="http://www.openejb.org/xml/ns/pkgen">
        <auto-increment-table>
          <sql>insert into sequence_table (dummy) values (1)</sql>
          <return-type>java.lang.Integer</return-type>
        </auto-increment-table>
      </key-generator>
    </entity>
    <entity>
      <ejb-name>CreditCardEJB</ejb-name>
      <table-name>CREDITCARDS</table-name>
      <cmp-field-mapping>
        <cmp-field-name>id</cmp-field-name>
        <cmp-field-class>java.lang.Integer</cmp-field-class>
        <table-column>id</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>cardType</cmp-field-name>
        <table-column>cardType</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>expiryDate</cmp-field-name>
        <table-column>expiryDate</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>cardNumber</cmp-field-name>
        <table-column>cardNumber</table-column>
      </cmp-field-mapping>
      <primkey-field>id</primkey-field>
      <key-generator xmlns="http://www.openejb.org/xml/ns/pkgen">
        <auto-increment-table>
          <sql>insert into sequence_table (dummy) values (1)</sql>
          <return-type>java.lang.Integer</return-type>
        </auto-increment-table>
      </key-generator>
    </entity>
    <entity>
      <ejb-name>ContactInfoEJB</ejb-name>
      <table-name>CONTACTINFOS</table-name>
      <cmp-field-mapping>
        <cmp-field-name>id</cmp-field-name>
        <cmp-field-class>java.lang.Integer</cmp-field-class>
        <table-column>id</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>familyName</cmp-field-name>
        <table-column>familyName</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>telephone</cmp-field-name>
        <table-column>telephone</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>givenName</cmp-field-name>
        <table-column>givenName</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>email</cmp-field-name>
        <table-column>email</table-column>
      </cmp-field-mapping>
      <primkey-field>id</primkey-field>
      <key-generator xmlns="http://www.openejb.org/xml/ns/pkgen">
        <auto-increment-table>
          <sql>insert into sequence_table (dummy) values (1)</sql>
          <return-type>java.lang.Integer</return-type>
        </auto-increment-table>
      </key-generator>
    </entity>
    <entity>
      <ejb-name>AddressEJB</ejb-name>
      <table-name>ADDRESSES</table-name>
      <cmp-field-mapping>
        <cmp-field-name>id</cmp-field-name>
        <cmp-field-class>java.lang.Integer</cmp-field-class>
        <table-column>id</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>zipCode</cmp-field-name>
        <table-column>zipCode</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>state</cmp-field-name>
        <table-column>state</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>streetName2</cmp-field-name>
        <table-column>streetName2</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>streetName1</cmp-field-name>
        <table-column>streetName1</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>country</cmp-field-name>
        <table-column>country</table-column>
      </cmp-field-mapping>
      <cmp-field-mapping>
        <cmp-field-name>city</cmp-field-name>
        <table-column>city</table-column>
      </cmp-field-mapping>
      <primkey-field>id</primkey-field>
      <key-generator xmlns="http://www.openejb.org/xml/ns/pkgen">
        <auto-increment-table>
          <sql>insert into sequence_table (dummy) values (1)</sql>
          <return-type>java.lang.Integer</return-type>
        </auto-increment-table>
      </key-generator>
    </entity>
    <entity>
      <ejb-name>AccountEJB</ejb-name>
      <table-name>ACCOUNTS</table-name>
      <cmp-field-mapping>
        <cmp-field-name>status</cmp-field-name>
        <table-column>status</table-column>
      </cmp-field-mapping>
      <primkey-field>status</primkey-field>
      <key-generator xmlns="http://www.openejb.org/xml/ns/pkgen">
        <auto-increment-table>
          <sql>insert into sequence_table (dummy) values (1)</sql>
          <return-type>java.lang.Integer</return-type>
        </auto-increment-table>
      </key-generator>
    </entity>
  </enterprise-beans>
  <relationships>
    <ejb-relation>
      <ejb-relation-name>CustomerEJBaccount</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>CustomerEJB</ejb-relationship-role-name>
        <relationship-role-source>
          <ejb-name>CustomerEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>account</cmr-field-name>
        </cmr-field>
        <role-mapping>
          <cmr-field-mapping>
            <key-column>userId</key-column>
            <foreign-key-column>AF1</foreign-key-column>
          </cmr-field-mapping>
        </role-mapping>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>ContactInfo-Address</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>contactInfo-has-address</ejb-relationship-role-name>
        <relationship-role-source>
          <ejb-name>ContactInfoEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>address</cmr-field-name>
        </cmr-field>
        <role-mapping>
          <cmr-field-mapping>
            <key-column>id</key-column>
            <foreign-key-column>AF1</foreign-key-column>
          </cmr-field-mapping>
        </role-mapping>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>CustomerEJBprofile</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>CustomerEJB</ejb-relationship-role-name>
        <relationship-role-source>
          <ejb-name>CustomerEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>profile</cmr-field-name>
        </cmr-field>
        <role-mapping>
          <cmr-field-mapping>
            <key-column>userId</key-column>
            <foreign-key-column>AF1</foreign-key-column>
          </cmr-field-mapping>
        </role-mapping>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>AccountEJBcontactInfo</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>AccountEJB</ejb-relationship-role-name>
        <relationship-role-source>
          <ejb-name>AccountEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>contactInfo</cmr-field-name>
        </cmr-field>
        <role-mapping>
          <cmr-field-mapping>
            <key-column>status</key-column>
            <foreign-key-column>AF1</foreign-key-column>
          </cmr-field-mapping>
        </role-mapping>
      </ejb-relationship-role>
    </ejb-relation>
    <ejb-relation>
      <ejb-relation-name>AccountEJBcreditCard</ejb-relation-name>
      <ejb-relationship-role>
        <ejb-relationship-role-name>AccountEJB</ejb-relationship-role-name>
        <relationship-role-source>
          <ejb-name>AccountEJB</ejb-name>
        </relationship-role-source>
        <cmr-field>
          <cmr-field-name>creditCard</cmr-field-name>
        </cmr-field>
        <role-mapping>
          <cmr-field-mapping>
            <key-column>status</key-column>
            <foreign-key-column>AF1</foreign-key-column>
          </cmr-field-mapping>
        </role-mapping>
      </ejb-relationship-role>
    </ejb-relation>
  </relationships>
</openejb-jar>
