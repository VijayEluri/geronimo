<?xml version="1.0" encoding="UTF-8"?>
<application
    xmlns="http://geronimo.apache.org/xml/ns/j2ee/application"
    configId="org/apache/geronimo/Console"
    parentId="org/apache/geronimo/RuntimeDeployer">
    
	<!-- these dependencies must be kept here so that their classes are loaded in the "EARs" classloader. -->
    <dependency>
        <uri>portlet-api/jars/portlet-api-${portlet_api_version}.jar</uri>
    </dependency>
    <dependency>
        <uri>org.apache.pluto/jars/pluto-${pluto_version}.jar</uri>
    </dependency>

    <dependency>
        <uri>geronimo/jars/geronimo-console-core-${pom.currentVersion}.jar</uri>
    </dependency>

    <module>
        <web>geronimo-console-framework-${pom.currentVersion}.war</web>
        <web-app xmlns="http://geronimo.apache.org/xml/ns/web" configId="console">
            <context-root>/console</context-root>
            <context-priority-classloader>false</context-priority-classloader>
            <security-realm-name>geronimo-properties-realm</security-realm-name>
            <security>
                <default-principal realm-name="geronimo-properties-realm">
                    <principal class="org.apache.geronimo.security.realm.providers.GeronimoUserPrincipal" name="system"/>
                </default-principal>
                <role-mappings>
                    <role role-name="admin">
                        <realm realm-name="geronimo-properties-realm">
                            <principal class="org.apache.geronimo.security.realm.providers.GeronimoGroupPrincipal" name="admin" designated-run-as="true"/>
                        </realm>
                    </role>
                </role-mappings>
            </security>
        </web-app>
    </module>
    
    <module>
        <web>geronimo-console-standard-${pom.currentVersion}.war</web>
        <web-app xmlns="http://geronimo.apache.org/xml/ns/web" configId="console-standard">
            <context-root>/console-standard</context-root>
            <context-priority-classloader>false</context-priority-classloader>
        </web-app>
    </module>

    <!-- Console specific server info -->
    <gbean name="PropertiesLoginManager" class="org.apache.geronimo.console.core.security.PropertiesLoginModuleManager">
        <reference name="ServerInfo"><gbean-name>geronimo.server:J2EEApplication=null,J2EEModule=org/apache/geronimo/System,J2EEServer=geronimo,j2eeType=GBean,name=ServerInfo</gbean-name></reference>
        <reference name="LoginModule">
                <gbean-name>geronimo.server:J2EEApplication=null,J2EEModule=org/apache/geronimo/Server,J2EEServer=geronimo,j2eeType=LoginModule,name=properties-login</gbean-name>
	</reference>
    </gbean>		
</application>
