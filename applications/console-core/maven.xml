<?xml version="1.0" encoding="UTF-8"?>

<project default="jar:install" xmlns:j="jelly:core" xmlns:ant="jelly:ant">

    <postGoal name="java:compile">
        <!-- generate the version properties file -->
        <j:new var="now" className="java.util.Date"/>
        <j:new var="dateFormat" className="java.text.SimpleDateFormat">
            <j:arg type="java.lang.String" value="yyyy.MM.dd"/>
        </j:new>
        <j:new var="timeFormat" className="java.text.SimpleDateFormat">
            <j:arg type="java.lang.String" value="HH:mm:ss.SSSZ"/>
        </j:new>
        <j:new var="yearFormat" className="java.text.SimpleDateFormat">
            <j:arg type="java.lang.String" value="yyyy"/>
        </j:new>
        <ant:echo file="${basedir}/target/classes/org/apache/geronimo/console/core/system/serverinfo/geronimo-version.properties">##### Generated by Maven ####
            version=${pom.currentVersion}
            build.date=${dateFormat.format(now)}
            build.time=${timeFormat.format(now)}
            copyright=Copyright (C) 2003-${yearFormat.format(now)}
            geronimo.build.version=${pom.currentVersion}
            geronimo.spec.version =${geronimo_spec_jms_version}
            portal.core.version=${pluto_version}
        </ant:echo>
    </postGoal>

</project>
