<?xml version="1.0" encoding="UTF-8"?>
<components>


    <!-- ================================================================ -->
    <!-- Set up the Jetty-specific jars                                   -->
    <!-- ================================================================ -->
    <class-space name="geronimo.system:role=ClassSpace,name=System">
        <codebase url="file:lib/">
            <archive name="*"/>
        </codebase>
        <codebase url="file:../../lib/">
            <archive name="geronimo-core-DEV.jar"/>
            <archive name="geronimo-common-DEV.jar"/>
        </codebase>
    </class-space>

    <!-- ================================================================ -->
    <!-- Set up a Jetty container                                         -->
    <!-- ================================================================ -->
    <mbean descriptor="org.apache.geronimo.web.jetty.JettyWebContainer"
        name="geronimo.web:type=WebContainer,container=Jetty">
        <attribute type="java.net.URI" name="DefaultWebXmlURI">webdefault.xml</attribute>
    </mbean>

    <mbean descriptor="org.apache.geronimo.web.WebDeploymentPlanner"
        name="geronimo.deployment:role=DeploymentPlanner,type=Jetty">
        <attribute name="ContainerName">Jetty</attribute>
        <attribute name="WebApplicationClass">org.apache.geronimo.web.jetty.JettyWebApplication</attribute>
    </mbean>


    <!-- ================================================================ -->
    <!-- Set up a connector to listen for http requests                   -->
    <!-- ================================================================ -->
    <mbean descriptor="org.apache.geronimo.web.jetty.JettyWebConnector"
        name="geronimo.web:type=WebConnector,container=Jetty,port=8080">
        <attribute name="Port">8080</attribute>
        <!--attribute name="Contexts">/abc, /def, /geh</attribute-->
    </mbean>

    <!-- ================================================================ -->
    <!-- Set up an access log                                             -->
    <!-- NOTE:                                                            -->
    <!--    1. Jetty will only rollover logs at midnight, so set 24hrs    -->
    <!--       to approximate this, <= 0 disables rollover.               -->
    <!--    2. Jetty does not support resolution to names of IP addresses -->
    <!--    3. buffering attribute is particular to Jetty, set to true    -->
    <!--       to enhance performance                                     -->
    <!--    4. LogPattern values are: "common", "extended", or a valid    -->
    <!--       NCSA-style log pattern (see for example:                   -->
    <!--            http://httpd.apache.org/docs/logs.html#accesslog      -->
    <!-- ================================================================ -->
    <!-- COMMENTED OUT PENDING NEW JETTY SNAPSHOT JAR
    <mbean descriptor="org.apache.geronimo.web.jetty.JettyWebAccessLog"
           name="geronimo.web:type=WebAccessLog,container=Jetty,instance=1">
           <attribute name="LogLocation" type="java.net.URI">logs</attribute>
           <attribute name="LogRolloverIntervalHrs">24</attribute>
           <attribute name="LogRetentionDays">10</attribute>
           <attribute name="LogPrefix">ncsa_</attribute>
           <attribute name="LogSuffix">_requests</attribute>
           <attribute name="Append">true</attribute>
           <attribute name="Buffering">false</attribute>
           <attribute name="LogDateFormat">dd/MMM/yyyy:HH:mm:ss ZZZ</attribute>
           <attribute name="LogPattern">extended</attribute>
    </mbean>
    -->
</components>
