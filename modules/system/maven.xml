<?xml version="1.0" encoding="ISO-8859-1"?>

<!-- $Revision: 1.1 $ $Date: 2004/02/12 18:12:52 $ -->

<project default="default"
    xmlns:j="jelly:core"
    xmlns:ant="jelly:ant"
    >

    <preGoal name="xdoc:jelly-transform">
        <attainGoal name="html2xdoc"/>
    </preGoal>

    <postGoal name="java:compile">
        <!-- generate the version properties file -->
        <j:new var="now" className="java.util.Date"/>
        <j:new var="dateFormat" className="java.text.SimpleDateFormat">
            <j:arg type="java.lang.String" value="yyyy.MM.dd"/>
        </j:new>
        <j:new var="timeFormat" className="java.text.SimpleDateFormat">
            <j:arg type="java.lang.String" value="HH:mm:ss.SSSZ"/>
        </j:new>
        <j:new var="yearFormat" className="java.text.SimpleDateFormat">
            <j:arg type="java.lang.String" value="yyyy"/>
        </j:new>
        <ant:echo file="${basedir}/target/classes/org/apache/geronimo/system/serverinfo/geronimo-version.properties">##### Generated by Maven ####
version=${pom.currentVersion}
build.date=${dateFormat.format(now)}
build.time=${timeFormat.format(now)}
copyright=Copyright (C) 2003-${yearFormat.format(now)}, The Apache Software Foundation
</ant:echo>
    </postGoal>
</project>
