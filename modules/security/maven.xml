<?xml version="1.0" encoding="ISO-8859-1"?>

<!-- $Revision: 1.2 $ $Date: 2004/02/12 08:14:05 $ -->

<project default="default"
    xmlns:j="jelly:core"
    xmlns:ant="jelly:ant"
    xmlns:maven="jelly:maven"
    xmlns:xmlbeans="geronimo:xmlbeans">

    <preGoal name="xdoc:jelly-transform">
        <attainGoal name="html2xdoc"/>
    </preGoal>

    <preGoal name="java:compile">
        <xmlbeans:schema2java
            sourcedir="${basedir}/src"
            sourceschema="schema/geronimo-security.xsd"
            xmlconfigs="${basedir}/src/schema/xmlconfig.xml"
            targetdir="${basedir}/target/xmlbeans"
            cataloglocation="${basedir}/../../specs/schema/src/catalog/resolver-catalog.xml"/>
    </preGoal>

    <!-- Set up the test files -->
    <postGoal name="test:test-resources">

        <j:jelly xmlns="jelly:ant">
            <!-- Create the directory where the test databases will reside -->
            <delete dir="${maven.build.dir}/database"/>
            <mkdir dir="${maven.build.dir}/database"/>
        </j:jelly>

    </postGoal>

</project>
