<?xml version="1.0" encoding="UTF-8"?>

<!-- $Revision: 1.2 $ $Date: 2004/02/03 06:47:56 $ -->

<project default="default"
    xmlns:j="jelly:core"
    xmlns:u="jelly:util"
    xmlns:ant="jelly:ant"
    xmlns:maven="jelly:maven"
    xmlns:define="jelly:define"
    xmlns:deploy="geronimo:xmlbeans">

    <!-- ================= -->
    <!-- Global Properties -->
    <!-- ================= -->

    <!-- Determine what the top-level project root is -->
    <j:set var="project.root" value="${pom.parentBasedir().getParentFile().getCanonicalFile()}"/>

    <!-- Load the global properties -->
    <ant:property file="${project.root}/etc/global.properties"/>


    <!-- ==================== -->
    <!-- Default Global Goals -->
    <!-- ==================== -->

    <goal name="default">
        <attainGoal name="plugin:install"/>
        <!-- install a marker file for use by dependencies-->
        <ant:property name="jardir__" value="${maven.repo.local}/${pom.artifactDirectory}/jars"/>
        <ant:mkdir dir="${jardir__}"/>
        <ant:touch
            file="${jardir__}/${pom.artifactId}-${pom.currentVersion}.jar"
            />
    </goal>

    <goal name="build">
        <attainGoal name="default"/>
    </goal>

    <goal name="rebuild">
        <attainGoal name="clean"/>
        <attainGoal name="build"/>
    </goal>

    <goal name="clover.wrapper">
        <!-- no src/test, don't run clover -->
        <!--attainGoal name="clover"/-->
    </goal>

</project>
