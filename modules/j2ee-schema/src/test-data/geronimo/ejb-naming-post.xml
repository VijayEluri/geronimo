<?xml version="1.0"?>

<openejb-jar configId="org/openejb/Itests" parentId="org/apache/geronimo/DefaultDatabase" xmlns="http://www.openejb.org/xml/ns/openejb-jar" xmlns:nam="http://geronimo.apache.org/xml/ns/naming">
  <dependency>
    <uri>junit/jars/junit-3.8.jar</uri>
  </dependency>
    <nam:cmp-connection-factory>
        <nam:application>null</nam:application>
        <nam:module>org/apache/geronimo/DefaultDatabase</nam:module>
        <nam:name>DefaultDatasource</nam:name>
    </nam:cmp-connection-factory>
  <enterprise-beans>
    <!--
        ########################################################
        Stateless
        ########################################################
        -->
    <session>
      <ejb-name>BasicStatelessBean</ejb-name>
      <jndi-name>client/tests/stateless/BasicStatelessHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>stateless/references/Resource_manager_access</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>BasicBMTStatelessBean</ejb-name>
      <jndi-name>client/tests/stateless/BeanManagedBasicStatelessHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>stateless/references/Resource_manager_access</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>DatabaseBean</ejb-name>
      <jndi-name>client/tools/DatabaseHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>database</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>BMTStatelessBean</ejb-name>
      <jndi-name>client/tests/stateless/BeanManagedTransactionTests/EJBHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>database</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>EncStatelessBean</ejb-name>
      <jndi-name>client/tests/stateless/EncBean</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>datasource</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>StatelessRMIIIOPBean</ejb-name>
      <jndi-name>client/tests/stateless/RMI-over-IIOP/EJBHome</jndi-name>
    </session>
    <!--
        ########################################################
        Stateless
        ########################################################
        -->
    <session>
      <ejb-name>BasicStatefulBean</ejb-name>
      <jndi-name>client/tests/stateful/BasicStatefulHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>stateful/references/Resource_manager_access</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>BasicBMTStatefulBean</ejb-name>
      <jndi-name>client/tests/stateful/BeanManagedBasicStatefulHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>stateful/references/Resource_manager_access</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>BMTStatefulBean</ejb-name>
      <jndi-name>client/tests/stateful/BeanManagedTransactionTests/EJBHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>datasource</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>EncStatefulBean</ejb-name>
      <jndi-name>client/tests/stateful/EncBean</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>datasource</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </session>
    <session>
      <ejb-name>StatefulRMIIIOPBean</ejb-name>
      <jndi-name>client/tests/stateful/RMI-over-IIOP/EJBHome</jndi-name>
    </session>
    <!--
        ########################################################
        BMP
        ########################################################
        -->
    <entity>
      <ejb-name>BasicBmpBean</ejb-name>
      <jndi-name>client/tests/entity/bmp/BasicBmpHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>jdbc/basic/entityDatabase</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </entity>
    <entity>
      <ejb-name>AOBasicBmpBean</ejb-name>
      <jndi-name>client/tests/entity/bmp/allowed_operations/EntityHome</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>jdbc/basic/entityDatabase</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
      <nam:resource-ref>
        <nam:ref-name>entity/references/Resource_manager_access</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </entity>
    <entity>
      <ejb-name>EncBmpBean</ejb-name>
      <jndi-name>client/tests/entity/bmp/EncBean</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>datasource</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
      <nam:resource-ref>
        <nam:ref-name>jdbc/basic/entityDatabase</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </entity>
    <entity>
      <ejb-name>BmpRMIIIOPBean</ejb-name>
      <jndi-name>client/tests/entity/bmp/RMI-over-IIOP/EJBHome</jndi-name>
    </entity>
    <!--
        ########################################################
        BMP
        ########################################################
        -->
    <entity>
      <ejb-name>BasicCmpBean</ejb-name>
      <jndi-name>client/tests/entity/cmp/BasicCmpHome</jndi-name>
      <query>
        <query-method>
          <method-name>findByLastName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <sql>SELECT id FROM BasicCmp WHERE lastName = ?</sql>
      </query>
      <query>
        <query-method>
          <method-name>findEmptyCollection</method-name>
          <method-params/>
        </query-method>
        <sql>SELECT id FROM BasicCmp WHERE 1 = 0</sql>
      </query>
      <nam:resource-ref>
        <nam:ref-name>jdbc/basic/entityDatabase</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </entity>
    <entity>
      <ejb-name>AOBasicCmpBean</ejb-name>
      <jndi-name>client/tests/entity/cmp/allowed_operations/EntityHome</jndi-name>
      <query>
        <query-method>
          <method-name>findByLastName</method-name>
          <method-params>
            <method-param>java.lang.String</method-param>
          </method-params>
        </query-method>
        <sql>SELECT id FROM AOBasicCmp WHERE lastName = ?</sql>
      </query>
      <query>
        <query-method>
          <method-name>findEmptyCollection</method-name>
          <method-params/>
        </query-method>
        <sql>SELECT id FROM AOBasicCmp WHERE 1 = 0</sql>
      </query>
      <nam:resource-ref>
        <nam:ref-name>jdbc/basic/entityDatabase</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
      <nam:resource-ref>
        <nam:ref-name>entity/references/Resource_manager_access</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </entity>
    <entity>
      <ejb-name>EncCmpBean</ejb-name>
      <jndi-name>client/tests/entity/cmp/EncBean</jndi-name>
      <nam:resource-ref>
        <nam:ref-name>jdbc/basic/entityDatabase</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
      <nam:resource-ref>
        <nam:ref-name>datasource</nam:ref-name>
        <nam:target-name>DefaultDatasource</nam:target-name>
      </nam:resource-ref>
    </entity>
    <entity>
      <ejb-name>CmpRMIIIOPBean</ejb-name>
      <jndi-name>client/tests/entity/cmp/RMI-over-IIOP/EJBHome</jndi-name>
    </entity>
  </enterprise-beans>
</openejb-jar>
