<?xml version="1.0" encoding="UTF-8"?>

<!--
Configuration for the Geronimo deployer

-->
<configuration
    xmlns="http://geronimo.apache.org/xml/ns/deployment"
    configId="org/apache/geronimo/J2EEDeployer"
    parentId="org/apache/geronimo/DeployerSystem"
    >

    <include>
        <uri>geronimo/jars/geronimo-connector-DEV.jar</uri>
    </include>
    <include>
        <uri>geronimo/jars/geronimo-security-DEV.jar</uri>
    </include>
    <dependency>
        <uri>geronimo/jars/geronimo-jetty-DEV.jar</uri>
    </dependency>
    <include>
        <uri>geronimo/jars/geronimo-naming-DEV.jar</uri>
    </include>
    <include>
        <uri>geronimo/jars/geronimo-transaction-DEV.jar</uri>
    </include>
    <dependency>
        <uri>geronimo-spec/jars/geronimo-spec-j2eeschema-DEV.jar</uri>
    </dependency>
    <!-- seems to be required to load jetty deployer - but I think this should not be here-->
    <dependency>
        <uri>geronimo-spec/jars/geronimo-spec-j2ee-DEV.jar</uri>
    </dependency>

    <gbean name="geronimo.deployment:role=Deployer,config=org/apache/geronimo/J2EEDeployer" class="org.apache.geronimo.deployment.Deployer">
        <reference name="Builders">geronimo.deployer:role=Builder,config=org/apache/geronimo/J2EEDeployer,*</reference>
        <reference name="Store">geronimo.deployment:role=ConfigurationStore,type=Local</reference>
    </gbean>

    <gbean name="geronimo.deployer:role=Builder,type=RAR_1_0,config=org/apache/geronimo/J2EEDeployer" class="org.apache.geronimo.connector.deployment.RAR_1_0ConfigBuilder">
        <attribute name="ConnectionTrackerNamePattern" type="javax.management.ObjectName">geronimo.server:type=ConnectionTracker</attribute>
        <reference name="Kernel">geronimo.boot:role=Kernel</reference>
        <reference name="Repository">*:role=Repository,*</reference>
    </gbean>

    <gbean name="geronimo.deployer:role=Builder,type=RAR_1_5,config=org/apache/geronimo/J2EEDeployer" class="org.apache.geronimo.connector.deployment.RAR_1_5ConfigBuilder">
        <reference name="Kernel">geronimo.boot:role=Kernel</reference>
        <reference name="Repository">*:role=Repository,*</reference>
    </gbean>

    <gbean name="geronimo.deployer:role=Builder,type=Service,config=org/apache/geronimo/J2EEDeployer" class="org.apache.geronimo.deployment.service.ServiceConfigBuilder">
        <reference name="Kernel">geronimo.boot:role=Kernel</reference>
        <reference name="Repository">*:role=Repository,*</reference>
    </gbean>

    <gbean name="geronimo.deployer:role=Builder,type=WAR,config=org/apache/geronimo/J2EEDeployer" class="org.apache.geronimo.jetty.deployment.WARConfigBuilder">
        <reference name="Kernel">geronimo.boot:role=Kernel</reference>
        <reference name="Repository">*:role=Repository,*</reference>
    </gbean>
</configuration>