<html>
    <head>
        <title>Geronimo : JaasLoginService API Discussion</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Geronimo : JaasLoginService API Discussion
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Nov 17, 2005 by <font color="#0050B2">hcunico@gmail.com</font>.
				    </div>

				    
<p><a name="JaasLoginServiceAPIDiscussion-top"></a></p>

<p><em><b>Article donated by:</b> <a href="mailto:simon@godik.com" title="Send mail to Simon Godik">Simon Godik</a>, <a href="mailto:hcunico@gmail.com" title="Send mail to Hernan Cunico">Hernan Cunico</a></em></p>

<p>Any client that holds <tt>JaasLoginService</tt> reference can use login service API to log into Geronimo. Client enforces realm authentication semantics by combining login module authentication results. Client tells login service that authentication succeeded. And client has an ability to synchronize it's own <tt>Principals</tt> into <b>secuiry-session</b> within <tt>JaasLoginService</tt>.</p>

<p>All these points can be exploited. </p>

<p>Synchronizing <b>client</b> <tt>Principals</tt> into <b>security session</b> defeats authentication.</p>

<p>Having <b>client to compute login module combination</b> opens up a possibility of violating realm semantics. Client can ignore login module configuration flags.</p>

<p>Having <b>client</b> to tell the <b>login service</b> that the <b>authentication succeeded</b>, also opens an avenue for attack, where in fact it did not, and forcing login service to commit.</p>

<h4><a name="JaasLoginServiceAPIDiscussion-Suggestions"></a>Suggestions</h4>
<p><tt>JaasLoginSerivce.synchPrincipals()</tt> method must be removed.</p>

<p>Login Service API should be refactored and reduced to something like <tt>login(String realm-name)</tt>. All the work that is currently done by the <tt>JaasLoginCoordinator</tt> must be refactored into the <b>Login Service</b>.</p>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Document generated by Confluence on Dec 09, 2005 22:10</font></td>
		    </tr>
	    </table>
    </body>
</html>